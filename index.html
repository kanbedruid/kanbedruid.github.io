<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>星空背景</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden; /* 禁止滚动，纯全屏背景 */
      background:
        radial-gradient(1200px 800px at 20% 10%, #1b1f3b 0%, transparent 60%),
        radial-gradient(1000px 700px at 80% 20%, #2a174a 0%, transparent 65%),
        linear-gradient(180deg, #090b16, #05060c);
    }

    canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
    }
  </style>
</head>
<body>
  <canvas id="starryBg"></canvas>

  <script>
    // 星空画布核心配置
    const canvas = document.getElementById('starryBg');
    const ctx = canvas.getContext('2d');
    let w, h;

    // 星星配置（保留原星空的细腻度）
    let stars = [];
    const STAR_COUNT = 140; // 星星数量，可调整
    // 鼠标尾迹（极光效果）
    const trails = [];
    // 鼠标状态
    const mouse = { x: w / 2, y: h / 2, prevX: w / 2, prevY: h / 2 };

    // 初始化画布和星星
    function init() {
      resizeCanvas();
      createStars();
      animate();
    }

    // 适配屏幕大小（窗口变化自动调整）
    function resizeCanvas() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
      mouse.x = w / 2;
      mouse.y = h / 2;
      // 窗口变化重新生成星星，保证全屏分布
      createStars();
    }

    // 创建星星数组
    function createStars() {
      stars = Array.from({ length: STAR_COUNT }, () => ({
        x: Math.random() * w,
        y: Math.random() * h,
        r: Math.random() * 1.8 + 0.6, // 星星大小随机
        vx: (Math.random() - 0.5) * 0.25, // 星星缓慢移动速度
        vy: (Math.random() - 0.5) * 0.25
      }));
    }

    // 更新星星位置（边界反弹）
    function updateStars() {
      stars.forEach(star => {
        star.x += star.vx;
        star.y += star.vy;
        // 碰到屏幕边缘反弹，保证星星一直在视野内
        if (star.x < 0 || star.x > w) star.vx *= -1;
        if (star.y < 0 || star.y > h) star.vy *= -1;
      });
    }

    // 绘制星星
    function drawStars() {
      stars.forEach(star => {
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.r, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(200,190,255,0.5)'; // 星空紫白色星星，贴合原风格
        ctx.fill();
      });
    }

    // 更新鼠标尾迹（极光效果）
    function updateTrails() {
      // 每帧添加一个尾迹点，设置生命周期60帧
      trails.push({ x: mouse.x, y: mouse.y, life: 60 });
      // 尾迹逐渐消失，生命周期为0则移除
      for (let i = trails.length - 1; i >= 0; i--) {
        trails[i].life--;
        if (trails[i].life <= 0) trails.splice(i, 1);
      }
    }

    // 绘制鼠标极光尾迹（原星空的柔化效果）
    function drawTrails() {
      trails.forEach(t => {
        const alpha = t.life / 60; // 随生命周期降低透明度
        ctx.beginPath();
        ctx.arc(t.x, t.y, 18 * alpha, 0, Math.PI * 2); // 尾迹由大到小
        ctx.fillStyle = `rgba(150,200,255,${alpha * 0.35})`; // 极光淡蓝色，贴合原风格
        ctx.fill();
      });
    }

    // 鼠标移动更新坐标
    function updateMousePos(e) {
      mouse.prevX = mouse.x;
      mouse.prevY = mouse.y;
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    }

    // 主动画循环（60帧/秒，流畅无卡顿）
    function animate() {
      ctx.clearRect(0, 0, w, h); // 清空画布
      updateStars();
      updateTrails();
      drawStars();
      drawTrails();
      requestAnimationFrame(animate);
    }

    // 事件监听
    window.addEventListener('resize', resizeCanvas); // 窗口大小变化适配
    window.addEventListener('mousemove', updateMousePos); // 鼠标移动追踪
    window.addEventListener('touchmove', (e) => { // 手机触摸适配，替代鼠标移动
      e.preventDefault(); // 禁止触摸滚动
      updateMousePos(e.touches[0]);
    });

    // 页面加载完成初始化
    window.onload = init;
  </script>
</body>
</html>